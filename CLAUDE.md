# ğŸ® ë°¤ì˜ ì¹¨ì…ì (The Night Intruder) - ê²Œì„ ê°œë°œ ë§ˆìŠ¤í„°í”Œëœ

> **ì‘ì„±ì¼**: 2025-01-06 (ìˆ˜ì •: í…œí”Œë¦¿ ê¸°ë°˜ AI ì‹œìŠ¤í…œ)
> **í”„ë¡œì íŠ¸**: AI ì¶”ë¦¬ ê²Œì„ - Flutter ê¸°ë°˜ ë©€í‹°í”Œë«í¼
> **ëª©í‘œ**: 3-5ê°œì›” ë‚´ MVP ì¶œì‹œ

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ì•„í‚¤í…ì²˜](#2-ê¸°ìˆ -ì•„í‚¤í…ì²˜)
3. [í•µì‹¬ ê²Œì„ ì‹œìŠ¤í…œ](#3-í•µì‹¬-ê²Œì„-ì‹œìŠ¤í…œ)
4. [UI/UX êµ¬í˜„ ì „ëµ](#4-uiux-êµ¬í˜„-ì „ëµ)
5. [ë°˜ì‘í˜• ë””ìì¸ ì›ì¹™](#5-ë°˜ì‘í˜•-ë””ìì¸-ì›ì¹™)
6. [ë°ì´í„° êµ¬ì¡° ì„¤ê³„](#6-ë°ì´í„°-êµ¬ì¡°-ì„¤ê³„)
7. [AI í…œí”Œë¦¿ ì‹œìŠ¤í…œ](#7-ai-í…œí”Œë¦¿-ì‹œìŠ¤í…œ)
8. [ê°œë°œ ë¡œë“œë§µ](#8-ê°œë°œ-ë¡œë“œë§µ)
9. [ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤](#9-ìš°ì„ ìˆœìœ„-ë§¤íŠ¸ë¦­ìŠ¤)
10. [ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘ ì „ëµ](#10-ë¦¬ìŠ¤í¬-ë°-ëŒ€ì‘-ì „ëµ)
11. [í’ˆì§ˆ ë³´ì¦ ê³„íš](#11-í’ˆì§ˆ-ë³´ì¦-ê³„íš)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ê²Œì„ ì»¨ì…‰

**ì¥ë¥´**: ì¶”ë¦¬ ì–´ë“œë²¤ì²˜ / ì¸í„°ë™í‹°ë¸Œ í”½ì…˜
**í”Œë«í¼**: Android, iOS, Steam (Flutter Desktop)
**íƒ€ê²Ÿ**: ì¶”ë¦¬ ê²Œì„ íŒ¬, ì„±ì¸ (15ì„¸ ì´ìƒ)
**í”Œë ˆì´ íƒ€ì„**: 3-5ì‹œê°„ (1íšŒì°¨)
**ì¬í”Œë ˆì´**: ë‹¤ì–‘í•œ ì¦ê±°ë¬¼ ì¡°í•©ìœ¼ë¡œ ìƒˆë¡œìš´ AI ì‘ë‹µ ë°œê²¬

### 1.2 í•µì‹¬ ê²Œì„í”Œë ˆì´

```
ê²½ì°°ì²­ í”„ë¡œíŒŒì¼ë§ì„¼í„° AI ì „ë‹´ ìˆ˜ì‚¬ê´€
    â†“
5ì¼ ë™ì•ˆ ì´ë©”ì¼/ì¦ê±° ë¶„ì„ (ì´ 15ê°œ ì´ë©”ì¼)
    â†“
AI ë¶„ì„ ìš”ì²­: ì¦ê±°ë¬¼ 3ê°œ ì„ íƒ + ë¶„ì„ ë ˆë²¨ ì„ íƒ
    â†“
í…œí”Œë¦¿ ê¸°ë°˜ AI ì‘ë‹µ (ì‚¬ì „ ì œì‘ëœ ì‹œë‚˜ë¦¬ì˜¤)
    â†“
3ëª…ì˜ ìš©ì˜ì ì¤‘ ì§„ë²” ì°¾ê¸°
    â†“
ìµœì¢… ì œì¶œ â†’ ì—”ë”© (S/A/B/C/F ë“±ê¸‰)
```

### 1.3 ì°¨ë³„í™” í¬ì¸íŠ¸

- âœ… **ì™„ë²½í•œ ë°€ì‹¤ ë¯¸ìŠ¤í„°ë¦¬**: ë¯¸ë„ëŸ¼ ë§¤ë“­ íŠ¸ë¦­ (ë‚šì‹¯ì¤„)
- âœ… **ê°•ë ¥í•œ ë ˆë“œí—¤ë§**: ê¹€ìˆ˜í˜„ ì†Œì„¤ ì›ê³  (Day 5 ë°˜ì „)
- âœ… **í…œí”Œë¦¿ ê¸°ë°˜ AI ì‹œìŠ¤í…œ**: ì¦ê±°ë¬¼ ì¡°í•©ë³„ ë§ì¶¤ ì‘ë‹µ (ì˜¤í”„ë¼ì¸ í”Œë ˆì´ ê°€ëŠ¥)
- âœ… **ë³µì¡í•œ ì¸ê°„ê´€ê³„**: ê³µëª¨ ê°€ëŠ¥ì„±, ë¶ˆë¥œ, íš¡ë ¹ ë“± í˜„ì‹¤ì  ë™ê¸°
- âœ… **ëª°ì…í˜• UI**: ì‹¤ì œ ìˆ˜ì‚¬ê´€ì˜ PC í™˜ê²½ ì‹œë®¬ë ˆì´ì…˜

### 1.4 AI ì‹œìŠ¤í…œ ì„¤ê³„ ì² í•™

**í…œí”Œë¦¿ ê¸°ë°˜ ì‘ë‹µ ì‹œìŠ¤í…œ (Not Real-time API)**:
- âœ… **ì˜¤í”„ë¼ì¸ í”Œë ˆì´ ê°€ëŠ¥**: ë„¤íŠ¸ì›Œí¬ ë¶ˆí•„ìš”
- âœ… **ë¹„ìš© ì œë¡œ**: API í˜¸ì¶œ ë¹„ìš© ì—†ìŒ
- âœ… **ì¼ê´€ëœ í’ˆì§ˆ**: ê²Œì„ ë””ìì´ë„ˆê°€ ì˜ë„í•œ íŒíŠ¸ë§Œ ì œê³µ
- âœ… **ì¦‰ê° ì‘ë‹µ**: ë¡œë”© ì—†ìŒ (ëŒ€ê¸° ì‹œê°„ì€ ì—°ì¶œ)
- âœ… **ì¬í”Œë ˆì´ ê°€ì¹˜**: ì¦ê±°ë¬¼ ì¡°í•©ë³„ ë‹¤ì–‘í•œ ì‘ë‹µ

---

## 2. ê¸°ìˆ  ì•„í‚¤í…ì²˜

### 2.1 í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ

```yaml
Framework: Flutter 3.24+ (Stable)
Language: Dart 3.0+
State Management: Riverpod 2.x (ì¶”ì²œ) ë˜ëŠ” Provider 6.x
Local Storage:
  - SharedPreferences: ê²Œì„ ì§„í–‰ ìƒíƒœ, ì„¤ì •
  - Hive: ì´ë©”ì¼, ì¦ê±°, ë©”ëª¨, AI ì‘ë‹µ í…œí”Œë¦¿
Platform Support:
  - Android: minSdkVersion 21 (Android 5.0+)
  - iOS: iOS 13.0+
  - Desktop: Windows 10+, macOS 10.14+
```

### 2.2 ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬

```yaml
dependencies:
  # Core
  flutter_riverpod: ^2.4.0  # ìƒíƒœ ê´€ë¦¬
  hive: ^2.2.3              # ë¡œì»¬ DB
  hive_flutter: ^1.1.0
  shared_preferences: ^2.2.2

  # UI/UX
  google_fonts: ^6.1.0      # Noto Sans KR
  cached_network_image: ^3.3.0  # ì´ë¯¸ì§€ ìºì‹±
  flutter_animate: ^4.3.0   # ì• ë‹ˆë©”ì´ì…˜
  flutter_markdown: ^0.6.18 # Markdown ë Œë”ë§

  # Utilities
  intl: ^0.18.0             # ë‹¤êµ­ì–´/ë‚ ì§œ
  path_provider: ^2.1.1     # íŒŒì¼ ê²½ë¡œ
  json_annotation: ^4.8.1   # JSON ì§ë ¬í™”

  # Desktop (ì˜µì…˜)
  window_manager: ^0.3.7    # ì°½ ê´€ë¦¬

dev_dependencies:
  build_runner: ^2.4.6
  json_serializable: ^6.7.1
  hive_generator: ^2.0.1
  riverpod_generator: ^2.3.0
```

**ì£¼ìš” ë³€ê²½ì‚¬í•­**:
- âŒ `dio`, `http` ì œê±° (API í˜¸ì¶œ ë¶ˆí•„ìš”)
- âœ… `flutter_markdown` ì¶”ê°€ (AI ì‘ë‹µ ë Œë”ë§)

### 2.3 í”„ë¡œì íŠ¸ êµ¬ì¡°

```
lib/
â”œâ”€â”€ main.dart
â”œâ”€â”€ app.dart
â”‚
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ colors.dart
â”‚   â”‚   â”œâ”€â”€ text_styles.dart
â”‚   â”‚   â””â”€â”€ game_constants.dart
â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â””â”€â”€ app_theme.dart
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ helpers.dart
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ email.dart
â”‚   â”‚   â”œâ”€â”€ suspect.dart
â”‚   â”‚   â”œâ”€â”€ evidence.dart
â”‚   â”‚   â”œâ”€â”€ game_state.dart
â”‚   â”‚   â”œâ”€â”€ ai_template.dart          # â­ ì‹ ê·œ
â”‚   â”‚   â””â”€â”€ ai_response.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ email_repository.dart
â”‚   â”‚   â”œâ”€â”€ suspect_repository.dart
â”‚   â”‚   â”œâ”€â”€ evidence_repository.dart
â”‚   â”‚   â”œâ”€â”€ ai_template_repository.dart  # â­ ì‹ ê·œ
â”‚   â”‚   â””â”€â”€ game_state_repository.dart
â”‚   â”‚
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ ai_template_service.dart   # â­ ì‹ ê·œ (í…œí”Œë¦¿ ë§¤ì¹­)
â”‚       â”œâ”€â”€ storage_service.dart
â”‚       â””â”€â”€ asset_loader.dart
â”‚
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ use_cases/
â”‚   â”‚   â”œâ”€â”€ unlock_email_use_case.dart
â”‚   â”‚   â”œâ”€â”€ submit_answer_use_case.dart
â”‚   â”‚   â””â”€â”€ ai_analysis_use_case.dart  # â­ ìˆ˜ì • (í…œí”Œë¦¿ ê¸°ë°˜)
â”‚   â””â”€â”€ validators/
â”‚       â””â”€â”€ submission_validator.dart
â”‚
â”œâ”€â”€ presentation/
â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”œâ”€â”€ game_state_provider.dart
â”‚   â”‚   â”œâ”€â”€ token_provider.dart
â”‚   â”‚   â”œâ”€â”€ email_provider.dart
â”‚   â”‚   â”œâ”€â”€ suspect_provider.dart
â”‚   â”‚   â””â”€â”€ ai_provider.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ splash/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ case_files/
â”‚   â”‚   â”œâ”€â”€ emails/
â”‚   â”‚   â”œâ”€â”€ evidence/
â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”‚   â”œâ”€â”€ ai_panel_bottom_sheet.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ evidence_selector_dialog.dart  # â­ ì‹ ê·œ
â”‚   â”‚   â”‚   â””â”€â”€ ai_response_screen.dart
â”‚   â”‚   â””â”€â”€ submission/
â”‚   â”‚
â”‚   â””â”€â”€ widgets/
â”‚       â”œâ”€â”€ folder_icon.dart
â”‚       â”œâ”€â”€ email_card.dart
â”‚       â”œâ”€â”€ suspect_card.dart
â”‚       â”œâ”€â”€ evidence_card.dart
â”‚       â”œâ”€â”€ evidence_selector_item.dart  # â­ ì‹ ê·œ
â”‚       â”œâ”€â”€ ai_input_panel.dart
â”‚       â””â”€â”€ day_timer.dart
â”‚
â””â”€â”€ assets/
    â”œâ”€â”€ data/
    â”‚   â”œâ”€â”€ core/
    â”‚   â”œâ”€â”€ day1/
    â”‚   â”œâ”€â”€ day2/
    â”‚   â”œâ”€â”€ day3/
    â”‚   â”œâ”€â”€ day4/
    â”‚   â”œâ”€â”€ day5/
    â”‚   â””â”€â”€ ai_templates/               # â­ ì‹ ê·œ
    â”‚       â”œâ”€â”€ question_templates.json
    â”‚       â”œâ”€â”€ think_templates.json
    â”‚       â””â”€â”€ ultra_think_templates.json
    â”‚
    â”œâ”€â”€ images/
    â””â”€â”€ fonts/
```

---

## 3. í•µì‹¬ ê²Œì„ ì‹œìŠ¤í…œ

### 3.1 Day ì‹œìŠ¤í…œ

```dart
// lib/data/models/game_state.dart
@HiveType(typeId: 0)
class GameState {
  @HiveField(0)
  int currentDay;           // 1-5

  @HiveField(1)
  DateTime currentTime;

  @HiveField(2)
  int tokenBalance;         // ì´ˆê¸° 500

  @HiveField(3)
  List<String> readEmailIds;

  @HiveField(4)
  List<String> unlockedEvidenceIds;

  @HiveField(5)
  Map<String, String> suspectNotes;

  @HiveField(6)
  List<String> completedEnhancedInvestigations;

  @HiveField(7)
  bool canSubmitAnswer;    // Day 5ë§Œ true

  @HiveField(8)
  String? submittedSuspect;
}
```

### 3.2 í† í° ì‹œìŠ¤í…œ

```dart
// lib/data/models/ai_action.dart
enum AIAction {
  question(cost: 10, duration: Duration.zero),
  think(cost: 50, duration: Duration(seconds: 30)),      // â­ ì—°ì¶œìš© ëŒ€ê¸°
  ultraThink(cost: 100, duration: Duration(minutes: 2)); // â­ ì—°ì¶œìš© ëŒ€ê¸°

  final int cost;
  final Duration duration;  // ì‹¤ì œ AI í˜¸ì¶œ ì•„ë‹˜, ì—°ì¶œìš©

  const AIAction({required this.cost, required this.duration});
}
```

**ì£¼ìš” ë³€ê²½ì‚¬í•­**:
- âœ… `duration`ì€ ì—°ì¶œìš© ëŒ€ê¸° ì‹œê°„ (ì‹¤ì œ ì²˜ë¦¬ëŠ” ì¦‰ì‹œ)
- âœ… Think: 30ì´ˆ ëŒ€ê¸° (ì›ë˜ 1ë¶„ â†’ ì²´ê° ê°œì„ )
- âœ… Ultra Think: 2ë¶„ ëŒ€ê¸° (ì›ë˜ 5ë¶„ â†’ ì²´ê° ê°œì„ )

### 3.3 ì—”ë”© ì‹œìŠ¤í…œ

```dart
// lib/data/models/ending.dart
enum EndingGrade {
  sPlus,  // í•œì§€ì€ ë‹¨ë…, AI ë°˜ëŒ€í–ˆì§€ë§Œ ì˜³ì€ íŒë‹¨
  s,      // í•œì§€ì€ ë‹¨ë…, AI ë™ì˜
  aPlus,  // í•œì§€ì€+ë°•ì¤€ì˜ ê³µëª¨, AI ë°˜ëŒ€í–ˆì§€ë§Œ ì‹ ì¤‘
  a,      // í•œì§€ì€+ë°•ì¤€ì˜ ê³µëª¨, AI ë™ì˜
  b,      // ê¹€ìˆ˜í˜„, AIë„ ì†ì•˜ìŒ
  c,      // ê¹€ìˆ˜í˜„, AI ë¬´ì‹œ
  f,      // ë°•ì¤€ì˜ ë˜ëŠ” ë¶ˆê¸°ì†Œ
}

class EndingResult {
  final EndingGrade grade;
  final String title;
  final String description;
  final bool isCorrect;
  final bool agreedWithAI;

  static EndingResult determine({
    required String selectedSuspectId,
    required AIResponse? lastAIAnalysis,
  }) {
    final aiSuggestion = lastAIAnalysis?.topSuspect;
    final agreedWithAI = (selectedSuspectId == aiSuggestion);

    if (selectedSuspectId == 'hanJiEun') {
      if (agreedWithAI) {
        return EndingResult.s();
      } else {
        return EndingResult.sPlus();
      }
    } else if (selectedSuspectId == 'kimSuHyun') {
      if (agreedWithAI) {
        return EndingResult.b();
      } else {
        return EndingResult.c();
      }
    } else {
      return EndingResult.f();
    }
  }
}
```

---

## 4. UI/UX êµ¬í˜„ ì „ëµ

### 4.1 ë‹¤í¬ í…Œë§ˆ ë””ìì¸ ì‹œìŠ¤í…œ

```dart
// lib/core/constants/colors.dart
class GameColors {
  // ë°°ê²½
  static const background = Color(0xFF1a1a1a);
  static const surface = Color(0xFF2d2d2d);
  static const surfaceVariant = Color(0xFF3a3a3a);

  // ê°•ì¡°ìƒ‰
  static const primary = Color(0xFF4a9eff);         // AI, ë§í¬
  static const accent = Color(0xFFff6b6b);          // ê¸´ê¸‰, ê²½ê³ 
  static const success = Color(0xFF4ade80);         // ì„±ê³µ, ìƒˆ í•­ëª©

  // í…ìŠ¤íŠ¸
  static const textPrimary = Color(0xFFffffff);
  static const textSecondary = Color(0xFFb0b0b0);
  static const textHint = Color(0xFF6d6d6d);

  // ìƒíƒœ
  static const unread = Color(0xFF4a9eff);
  static const newItem = Color(0xFF4ade80);
  static const urgent = Color(0xFFff6b6b);
}
```

### 4.2 AI íŒ¨ë„ UI (ìˆ˜ì •)

#### ì¦ê±°ë¬¼ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ (ì‹ ê·œ)

```dart
// lib/presentation/screens/ai/evidence_selector_dialog.dart
class EvidenceSelectorDialog extends ConsumerStatefulWidget {
  final AIAction action;

  @override
  _EvidenceSelectorDialogState createState() => _EvidenceSelectorDialogState();
}

class _EvidenceSelectorDialogState extends ConsumerState<EvidenceSelectorDialog> {
  List<String> selectedEvidenceIds = [];

  @override
  Widget build(BuildContext context) {
    final allEvidences = ref.watch(evidenceProvider);

    return Dialog(
      child: Container(
        width: 600,
        height: 700,
        padding: EdgeInsets.all(24),
        child: Column(
          children: [
            Text(
              'AI ë¶„ì„ì— ì‚¬ìš©í•  ì¦ê±°ë¬¼ì„ 3ê°œ ì„ íƒí•˜ì„¸ìš”',
              style: GameTextStyles.title,
            ),
            SizedBox(height: 8),
            Text(
              'ì„ íƒí•œ ì¦ê±°ë¬¼ì„ ë°”íƒ•ìœ¼ë¡œ AIê°€ ë¶„ì„í•©ë‹ˆë‹¤',
              style: GameTextStyles.caption,
            ),

            SizedBox(height: 24),

            // ì¦ê±°ë¬¼ ê·¸ë¦¬ë“œ
            Expanded(
              child: GridView.builder(
                gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(
                  crossAxisCount: 3,
                  mainAxisSpacing: 16,
                  crossAxisSpacing: 16,
                ),
                itemCount: allEvidences.length,
                itemBuilder: (context, index) {
                  final evidence = allEvidences[index];
                  final isSelected = selectedEvidenceIds.contains(evidence.id);

                  return EvidenceSelectorItem(
                    evidence: evidence,
                    isSelected: isSelected,
                    onTap: () => _toggleSelection(evidence.id),
                    enabled: selectedEvidenceIds.length < 3 || isSelected,
                  );
                },
              ),
            ),

            SizedBox(height: 24),

            // ì„ íƒ ì™„ë£Œ ë²„íŠ¼
            ElevatedButton(
              onPressed: selectedEvidenceIds.length == 3
                  ? () => _confirmSelection(context)
                  : null,
              child: Text('ì„ íƒ ì™„ë£Œ (${selectedEvidenceIds.length}/3)'),
            ),
          ],
        ),
      ),
    );
  }

  void _toggleSelection(String evidenceId) {
    setState(() {
      if (selectedEvidenceIds.contains(evidenceId)) {
        selectedEvidenceIds.remove(evidenceId);
      } else if (selectedEvidenceIds.length < 3) {
        selectedEvidenceIds.add(evidenceId);
      }
    });
  }

  Future<void> _confirmSelection(BuildContext context) async {
    Navigator.pop(context, selectedEvidenceIds);
  }
}
```

#### AI íŒ¨ë„ Bottom Sheet (ìˆ˜ì •)

```dart
// lib/presentation/screens/ai/ai_panel_bottom_sheet.dart
class AIPanelBottomSheet extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final tokenBalance = ref.watch(tokenProvider).balance;

    return Container(
      padding: EdgeInsets.all(24),
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          Text('VIT AI ë¶„ì„ ë„êµ¬', style: GameTextStyles.title),
          SizedBox(height: 8),
          Text(
            'ì¦ê±°ë¬¼ 3ê°œë¥¼ ì„ íƒí•˜ì—¬ AI ë¶„ì„ì„ ìš”ì²­í•˜ì„¸ìš”',
            style: GameTextStyles.caption,
          ),
          SizedBox(height: 24),

          // ì§ˆë¬¸í•˜ê¸° (10í† í°)
          AIActionButton(
            icon: Icons.chat_bubble_outline,
            title: 'ì§ˆë¬¸í•˜ê¸°',
            cost: AIAction.question.cost,
            description: 'ì„ íƒí•œ ì¦ê±°ë¬¼ 3ê°œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°„ë‹¨í•œ ë¶„ì„',
            enabled: tokenBalance >= AIAction.question.cost,
            onPressed: () => _startAnalysis(context, ref, AIAction.question),
          ),

          SizedBox(height: 16),

          // Think (50í† í°)
          AIActionButton(
            icon: Icons.psychology,
            title: 'Think',
            cost: AIAction.think.cost,
            description: 'ì„ íƒí•œ ì¦ê±°ë¬¼ 3ê°œë¥¼ ì¢…í•© ë¶„ì„ (30ì´ˆ)',
            enabled: tokenBalance >= AIAction.think.cost,
            onPressed: () => _startAnalysis(context, ref, AIAction.think),
          ),

          SizedBox(height: 16),

          // Ultra Think (100í† í°)
          AIActionButton(
            icon: Icons.lightbulb_outline,
            title: 'Ultra Think',
            cost: AIAction.ultraThink.cost,
            description: 'ì„ íƒí•œ ì¦ê±°ë¬¼ 3ê°œë¥¼ ì‹¬ì¸µ ë¶„ì„ ë° ë ˆë“œí—¤ë§ íƒì§€ (2ë¶„)',
            enabled: tokenBalance >= AIAction.ultraThink.cost,
            onPressed: () => _startAnalysis(context, ref, AIAction.ultraThink),
          ),

          SizedBox(height: 24),
          Text('í˜„ì¬ í† í°: $tokenBalance', style: GameTextStyles.body),
        ],
      ),
    );
  }

  Future<void> _startAnalysis(
    BuildContext context,
    WidgetRef ref,
    AIAction action,
  ) async {
    // 1. ì¦ê±°ë¬¼ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸
    final selectedEvidences = await showDialog<List<String>>(
      context: context,
      builder: (context) => EvidenceSelectorDialog(action: action),
    );

    if (selectedEvidences == null || selectedEvidences.length != 3) {
      return; // ì·¨ì†Œë¨
    }

    // 2. ë¡œë”© ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ (ì—°ì¶œìš© ëŒ€ê¸°)
    showDialog(
      context: context,
      barrierDismissible: false,
      builder: (context) => AIAnalysisLoadingDialog(action: action),
    );

    try {
      // 3. í…œí”Œë¦¿ ê¸°ë°˜ AI ë¶„ì„ (ì¦‰ì‹œ ì‹¤í–‰, durationì€ ì—°ì¶œìš©)
      final response = await ref.read(aiAnalysisUseCaseProvider).execute(
        action,
        selectedEvidences,
      );

      // ì—°ì¶œìš© ëŒ€ê¸° (ì‹¤ì œ ì²˜ë¦¬ëŠ” ì´ë¯¸ ì™„ë£Œë¨)
      await Future.delayed(action.duration);

      // 4. ë¡œë”© ë‹«ê¸°
      Navigator.of(context).pop();

      // 5. ê²°ê³¼ í™”ë©´ìœ¼ë¡œ ì´ë™
      context.push('/ai-response', extra: response);
    } catch (e) {
      Navigator.of(context).pop();
      _showError(context, e.toString());
    }
  }
}
```

---

## 5. ë°˜ì‘í˜• ë””ìì¸ ì›ì¹™ â­ ì¤‘ìš”

### 5.1 Flutterì˜ dp (ë…¼ë¦¬ì  í”½ì…€) ì‹œìŠ¤í…œ

**í•µì‹¬ ê°œë…**: FlutterëŠ” **dp (density-independent pixels)** ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ê¸°ê¸°ì—ì„œ ì¼ê´€ëœ ë¬¼ë¦¬ì  í¬ê¸°ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.

```dart
// âœ… ì˜¬ë°”ë¥¸ ë°©ë²• (ê³ ì • dp ê°’)
Container(
  width: 48.0,  // 48dp = ëª¨ë“  ê¸°ê¸°ì—ì„œ ë™ì¼í•œ ì‹¤ì œ í¬ê¸°
  height: 48.0,
  child: Image.asset('icon.png'),
)

// dp ì‹œìŠ¤í…œ ì‘ë™ ë°©ì‹:
// - iPhone (3x): 48dp = 144 ë¬¼ë¦¬ í”½ì…€ â†’ ì•½ 8mm
// - Android (2x): 48dp = 96 ë¬¼ë¦¬ í”½ì…€ â†’ ì•½ 8mm
// - ê²°ê³¼: ëª¨ë“  ê¸°ê¸°ì—ì„œ ë™ì¼í•œ ë¬¼ë¦¬ì  í¬ê¸° âœ…
```

**ì ˆëŒ€ ê·œì¹™:**
- âœ… **ê³ ì • dp ê°’ ì‚¬ìš©** (ì˜ˆ: `48.0`, `56.0`, `14.0`)
- âœ… **LayoutConstants ì‚¬ìš©** (ê¸°ê¸°ë³„ ìµœì í™”ëœ dp ê°’ ì œê³µ)
- âŒ **í™”ë©´ ë¹„ìœ¨ ê¸°ë°˜ í¬ê¸° ê¸ˆì§€** (ê¸°ê¸°ë§ˆë‹¤ ë‹¤ë¥¸ ê²½í—˜ ì œê³µ)

### 5.2 ê¸°ê¸°ë³„ í¬ê¸° ì „ëµ

**ì•„ì´ì½˜ í¬ê¸° (ê¸°ê¸° íƒ€ì…ë³„ ë¶„ê¸°)**:
```dart
static double iconButtonSize(BuildContext context) {
  final screenSize = getScreenSize(context);

  switch (screenSize) {
    case ScreenSize.phone:     return 48.0; // í°: ì‘ê²Œ
    case ScreenSize.tablet:    return 64.0; // íƒœë¸”ë¦¿: ì¤‘ê°„
    case ScreenSize.desktop:   return 72.0; // PC: í¬ê²Œ
  }
}
```

**ê¸°ê¸° ë¶„ë¥˜ ê¸°ì¤€**:
- í°: í™”ë©´ ë„ˆë¹„ < 600dp
- íƒœë¸”ë¦¿: 600dp ~ 1200dp
- ë°ìŠ¤í¬íƒ‘: > 1200dp

### 5.3 ì£¼ìš” dp ê°’ í‘œ

| ìš”ì†Œ | í° | íƒœë¸”ë¦¿ | PC | ì½”ë“œ |
|------|------|--------|-----|------|
| ìƒë‹¨ë°” ë†’ì´ | 48dp | 48dp | 48dp | `LayoutConstants.topBarHeight(context)` |
| ì•„ì´ì½˜ í¬ê¸° | 48dp | 64dp | 72dp | `LayoutConstants.iconButtonSize(context)` |
| ì•„ì´ì½˜ ê°„ê²© | 16dp | 16dp | 16dp | `LayoutConstants.iconSpacing(context)` |
| AI ë°” ë†’ì´ | 56dp | 56dp | 56dp | `LayoutConstants.aiPromptBarHeight(context)` |
| í°íŠ¸ (ìƒë‹¨ë°”) | 14dp | 14dp | 14dp | `LayoutConstants.topBarFontSize(context)` |
| í°íŠ¸ (ë¼ë²¨) | 12dp | 12dp | 12dp | `LayoutConstants.iconLabelFontSize(context)` |

**ì „ì²´ dp ê°’í‘œ**: `lib/core/constants/layout_constants.dart` ì°¸ì¡°

### 5.4 ì™œ ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ”ê°€?

**âŒ ì´ì „ ë°©ì‹ (í™”ë©´ ë¹„ìœ¨ ê¸°ë°˜)ì˜ ë¬¸ì œ**:
- ì‘ì€ í°: ì•„ì´ì½˜ ë„ˆë¬´ ì‘ìŒ
- í° íƒœë¸”ë¦¿: ì•„ì´ì½˜ ë„ˆë¬´ í¼
- PC: ì•„ì´ì½˜ ê±°ëŒ€í•´ì§
- **ê²°ê³¼**: ê¸°ê¸°ë§ˆë‹¤ ì™„ì „íˆ ë‹¤ë¥¸ ê²½í—˜

**âœ… ìƒˆ ë°©ì‹ (ê³ ì • dp + ê¸°ê¸°ë³„ ë¶„ê¸°)ì˜ ì¥ì **:
- ëª¨ë“  ê¸°ê¸°ì—ì„œ ì¼ê´€ëœ ë¬¼ë¦¬ì  í¬ê¸°
- ê¸°ê¸° íƒ€ì…ë³„ ìµœì í™” (í°ì€ ì‘ê²Œ, PCëŠ” í¬ê²Œ)
- Material Design ê°€ì´ë“œë¼ì¸ ì¤€ìˆ˜
- **ê²°ê³¼**: ëª¨ë“  í”Œë«í¼ì—ì„œ ë™ì¼í•œ ê²Œì„ ê²½í—˜

### 5.5 ìƒˆë¡œìš´ í™”ë©´ ê°œë°œ ì‹œ ìˆœì„œ

1. **Material Design ê°€ì´ë“œë¼ì¸ í™•ì¸**
   - í„°ì¹˜ ì˜ì—­: ìµœì†Œ 48dp Ã— 48dp
   - ì•±ë°”: 56dp (ëª¨ë°”ì¼), 64dp (íƒœë¸”ë¦¿)
   - ë²„íŠ¼: ìµœì†Œ 48dp ë†’ì´
   - í°íŠ¸: ë³¸ë¬¸ 14-16dp, ì œëª© 20-24dp

2. **ê¸°ê¸°ë³„ ìµœì  í¬ê¸° ê²°ì •**
   ```dart
   // í°: ì‘ê²Œ (48dp)
   // íƒœë¸”ë¦¿: ì¤‘ê°„ (64dp)
   // PC: í¬ê²Œ (72dp)
   ```

3. **LayoutConstantsì— ì¶”ê°€**
   ```dart
   // lib/core/constants/layout_constants.dart
   static double newElementSize(BuildContext context) {
     final screenSize = getScreenSize(context);

     switch (screenSize) {
       case ScreenSize.phone:
         return 48.0;
       case ScreenSize.tablet:
         return 64.0;
       case ScreenSize.desktop:
         return 72.0;
     }
   }
   ```

4. **ìœ„ì ¯ì—ì„œ ì‚¬ìš©**
   ```dart
   final elementSize = LayoutConstants.newElementSize(context);

   Container(
     width: elementSize,
     height: elementSize,
     padding: EdgeInsets.all(8.0),  // ê³ ì • 8dp
     child: Icon(
       Icons.star,
       size: 24.0,  // ê³ ì • 24dp
       size: elementSize * 0.6,  // ìš”ì†Œì˜ 60%
     ),
   )
   ```

### 5.5 ìƒëŒ€ì  í¬ê¸° ê³„ì‚° íŒ¨í„´

```dart
// í™”ë©´ ì „ì²´ ê¸°ì¤€
final containerSize = LayoutConstants.iconButtonSize(context);

// ë¶€ëª¨ ìš”ì†Œ ê¸°ì¤€ (ë¹„ìœ¨ ê³±ì…ˆ)
final iconSize = containerSize * 0.7;        // ì»¨í…Œì´ë„ˆì˜ 70%
final padding = containerSize * 0.1;         // ì»¨í…Œì´ë„ˆì˜ 10%
final borderRadius = containerSize * 0.15;   // ì»¨í…Œì´ë„ˆì˜ 15%
```

### 5.6 ì°¸ê³  ìë£Œ

- **ê°€ì´ë“œ ë¬¸ì„œ**: `lib/core/constants/README.md`
- **êµ¬í˜„ ì˜ˆì‹œ**: `lib/presentation/screens/main/widgets/`
- **ë””ìì¸ ê¸°ì¤€**: `screenshot/ë©”ì¸í™”ë©´.png`

---

## 6. ë°ì´í„° êµ¬ì¡° ì„¤ê³„

### 5.1 í•µì‹¬ ëª¨ë¸

#### Evidence ëª¨ë¸

```dart
// lib/data/models/evidence.dart
@JsonSerializable()
class Evidence {
  final String id;                // "E001", "E002", ...
  final String name;              // "ë‚šì‹¯ì¤„"
  final String description;       // "ë¯¸ë„ëŸ¼ ë§¤ë“­ íŠ¸ë¦­ ê°€ëŠ¥"
  final String type;              // "physical", "digital", "circumstantial"
  final String? imagePath;        // ì´ë¯¸ì§€ ê²½ë¡œ
  final int unlockedDay;          // í•´ê¸ˆë˜ëŠ” Day
  final List<String> relatedSuspects; // ê´€ë ¨ ìš©ì˜ì ID

  Evidence({
    required this.id,
    required this.name,
    required this.description,
    required this.type,
    this.imagePath,
    required this.unlockedDay,
    required this.relatedSuspects,
  });

  factory Evidence.fromJson(Map<String, dynamic> json) => _$EvidenceFromJson(json);
  Map<String, dynamic> toJson() => _$EvidenceToJson(this);
}
```

#### AI Template ëª¨ë¸ (ì‹ ê·œ)

```dart
// lib/data/models/ai_template.dart
@JsonSerializable()
class AITemplate {
  final String id;                        // "T001", "T002", ...
  final AIAction action;                  // question, think, ultraThink
  final List<String> evidenceIds;         // ì¦ê±°ë¬¼ ì¡°í•© (ì •ë ¬ë¨)
  final int? minDay;                      // ìµœì†Œ Day (ì˜µì…˜)
  final int? maxDay;                      // ìµœëŒ€ Day (ì˜µì…˜)

  final String content;                   // AI ì‘ë‹µ í…ìŠ¤íŠ¸ (Markdown)
  final Map<String, double>? probabilities; // ìš©ì˜ìë³„ í™•ë¥  (Think/Ultra Think)
  final List<String>? keyEvidence;        // í•µì‹¬ ì¦ê±° ID
  final List<String>? redHerrings;        // ë ˆë“œí—¤ë§ ê²½ê³ 
  final String? recommendation;           // AI ì¶”ì²œ

  AITemplate({
    required this.id,
    required this.action,
    required this.evidenceIds,
    this.minDay,
    this.maxDay,
    required this.content,
    this.probabilities,
    this.keyEvidence,
    this.redHerrings,
    this.recommendation,
  });

  // ì¦ê±°ë¬¼ ì¡°í•©ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
  bool matchesEvidences(List<String> selectedIds) {
    final sortedSelected = List<String>.from(selectedIds)..sort();
    final sortedTemplate = List<String>.from(evidenceIds)..sort();
    return listEquals(sortedSelected, sortedTemplate);
  }

  factory AITemplate.fromJson(Map<String, dynamic> json) => _$AITemplateFromJson(json);
  Map<String, dynamic> toJson() => _$AITemplateToJson(this);
}
```

#### AI Response ëª¨ë¸

```dart
// lib/data/models/ai_response.dart
@JsonSerializable()
class AIResponse {
  final AIAction action;
  final DateTime timestamp;
  final List<String> selectedEvidenceIds; // ì„ íƒí•œ ì¦ê±°ë¬¼
  final String content;                   // AI ì‘ë‹µ (Markdown)
  final Map<String, double>? probabilities;
  final List<String>? keyEvidence;
  final List<String>? redHerrings;
  final String? recommendation;

  AIResponse({
    required this.action,
    required this.timestamp,
    required this.selectedEvidenceIds,
    required this.content,
    this.probabilities,
    this.keyEvidence,
    this.redHerrings,
    this.recommendation,
  });

  String get topSuspect {
    if (probabilities == null) return '';
    return probabilities!.entries
        .reduce((a, b) => a.value > b.value ? a : b)
        .key;
  }

  factory AIResponse.fromJson(Map<String, dynamic> json) => _$AIResponseFromJson(json);
  Map<String, dynamic> toJson() => _$AIResponseToJson(this);
}
```

### 5.2 JSON í…œí”Œë¦¿ ì˜ˆì‹œ

```json
// assets/data/ai_templates/ultra_think_templates.json
{
  "templates": [
    {
      "id": "UT_001",
      "action": "ultraThink",
      "evidenceIds": ["E003", "E006", "E009"],
      "minDay": 5,
      "content": "# ğŸ§  Ultra Think ì‹¬ì¸µ ë¶„ì„ ê²°ê³¼\n\n## ì„ íƒí•œ ì¦ê±°ë¬¼ ë¶„ì„\n\n### E003 - ë‚šì‹¯ì¤„ (ë¯¸ë„ëŸ¼ ë§¤ë“­)\n- **ë¬¼ë¦¬ì  ì¦ê±°ì˜ í•µì‹¬!**\n- í•œì§€ì€ ì•„ë²„ì§€ ìœ í’ˆ (ë‚šì‹œ ë™í˜¸íšŒ 20ë…„)\n- ì¬í˜„ ì‹¤í—˜: ê²½í—˜ì 90% ì„±ê³µë¥ \n\n### E006 - ë³€ê¸° ë””ê³¡ì‹  1ì •\n- í•œì§€ì€ ì§‘ ì••ìˆ˜ìˆ˜ìƒ‰ì—ì„œ ë°œê²¬\n- ì¦ê±° ì¸ë©¸ ì‹œë„ì˜ ê²°ì •ì  ì¦ê±°\n\n### E009 - í•œì§€ì€ íšŒì‚¬ ë°©ë¬¸ (í†  10:30)\n- ìœ ì–¸ì¥ ì •ë³´ ì—¿ë“£ê¸°\n- **ë²”í–‰ ë™ê¸° í™•ì •**\n\n---\n\n## ìš©ì˜ìë³„ í™•ë¥  ë¶„ì„\n\n### í•œì§€ì€ (ë‹¨ë…): **70.0%**\në¬¼ë¦¬ì  ì¦ê±° ì••ë„ì :\n- ë‚šì‹¯ì¤„ íŠ¸ë¦­ ì‹¤í–‰ ê°€ëŠ¥ (ì•„ë²„ì§€ì™€ í‰ìƒ ë‚šì‹œ)\n- ë””ê³¡ì‹  ì¦ê±° ì¸ë©¸ ì‹¤íŒ¨\n- ìœ ì–¸ì¥ ì •ë³´ë¡œ ë™ê¸° í™•ì •\n\níƒ€ì„ë¼ì¸ ì™„ë²½:\n- í†  10:30 íšŒì‚¬ ë°©ë¬¸ â†’ ìœ ì–¸ì¥ ì •ë³´\n- 12:00 ì •ì› ì‚¬ì „ ë‹µì‚¬\n- 18:00 ì¹¨ì… ì¶”ì •\n\në™ê¸° ìµœê°•:\n- 500ì–µ vs 0ì›\n- ì›”ìš”ì¼ 10ì‹œê°€ ë§ˆì§€ë§‰ ê¸°íšŒ\n\n### í•œì§€ì€ + ë°•ì¤€ì˜ (ê³µëª¨): **10.0%**\n- ì´ìˆ˜ì§„ ë§¤ê°œ (ì •í™© ì¦ê±°)\n- ì§ì ‘ ì¦ê±° ì—†ìŒ\n\n### ê¹€ìˆ˜í˜„: **5.0%**\n- âš ï¸ **ë ˆë“œí—¤ë§ í™•ì •**\n- ì†Œì„¤ ì›ê³  47í˜ì´ì§€ ë°œê²¬\n- í¸ì§‘ì êµì‹  3ê°œì›”\n- ë¹„íƒ€ë¯¼ ì˜ìˆ˜ì¦ ë³µêµ¬\n\n### ë°•ì¤€ì˜ (ë‹¨ë…): **5.0%**\n- ì•Œë¦¬ë°”ì´ ê°•í•¨\n- ë¬¼ë¦¬ì  ë¶ˆê°€ëŠ¥\n\n---\n\n## ë ˆë“œí—¤ë§ ê²½ê³ \n\nâš ï¸ **ê¹€ìˆ˜í˜„ì˜ ëª¨ë“  ë””ì§€í„¸ ì¦ê±°ëŠ” ì†Œì„¤ ì‘ì—…ì´ì—ˆìŠµë‹ˆë‹¤!**\n- ê²€ìƒ‰ ê¸°ë¡ (10/18~22) â†’ ì†Œì„¤ ìë£Œ ì¡°ì‚¬\n- ì´ë©”ì¼ \"ì‹¤í–‰\" â†’ ì†Œì„¤ ìºë¦­í„° ëŒ€ì‚¬\n- $300 ê²°ì œ â†’ ë¹„íƒ€ë¯¼ êµ¬ë§¤\n\n\"ë„ˆë¬´ ì™„ë²½í•œ ì¦ê±°\"ëŠ” ì˜¤íˆë ¤ ì˜ì‹¬í•´ì•¼ í•©ë‹ˆë‹¤.\n\n---\n\n## AI ìµœì¢… íŒë‹¨\n\n**ë²”ì¸: í•œì§€ì€ (80% = 70% ë‹¨ë… + 10% ê³µëª¨)**\n\ní•µì‹¬ ê·¼ê±°:\n1. í† ìš”ì¼ 10:30 íšŒì‚¬ ë°©ë¬¸ â†’ ìœ ì–¸ì¥ ì •ë³´ ì—¿ë“£ê¸°\n2. ë¬¼ë¦¬ì  ì¦ê±° ì••ë„ì  (ë‚šì‹¯ì¤„, ë°œìêµ­, ë””ê³¡ì‹ )\n3. ë™ê¸°ì˜ ì‹œê°„ì  ì••ë°• (ì›”ìš”ì¼ 10ì‹œ = ë§ˆì§€ë§‰)\n4. ì•Œë¦¬ë°”ì´ ì „ì²´ ì¡°ì‘ ì¶”ì •\n\n**ê¶Œì¥: í•œì§€ì€ ë‹¨ë… ë²”í–‰ìœ¼ë¡œ ì œì¶œ**",
      "probabilities": {
        "hanJiEun": 70.0,
        "hanJiEun_parkJunYoung": 10.0,
        "kimSuHyun": 5.0,
        "parkJunYoung": 5.0,
        "unknown": 10.0
      },
      "keyEvidence": ["E003", "E006", "E009", "E013"],
      "redHerrings": [
        "ê¹€ìˆ˜í˜„ ê²€ìƒ‰ ê¸°ë¡ì€ ì†Œì„¤ ìë£Œ ì¡°ì‚¬",
        "ê¹€ìˆ˜í˜„ ì´ë©”ì¼ì€ ì†Œì„¤ ìºë¦­í„° ëŒ€ì‚¬",
        "ê¹€ìˆ˜í˜„ $300 ê²°ì œëŠ” ë¹„íƒ€ë¯¼ êµ¬ë§¤"
      ],
      "recommendation": "í•œì§€ì€ (ë‹¨ë… ë²”í–‰)"
    },
    {
      "id": "UT_002",
      "action": "ultraThink",
      "evidenceIds": ["E004-1", "E004-2", "E011"],
      "minDay": 5,
      "content": "# ğŸ§  Ultra Think ì‹¬ì¸µ ë¶„ì„ ê²°ê³¼\n\n## ì„ íƒí•œ ì¦ê±°ë¬¼ ë¶„ì„\n\n### E004-1 - ê¹€ìˆ˜í˜„ ê²€ìƒ‰ ê¸°ë¡\n### E004-2 - ê¹€ìˆ˜í˜„ ì´ë©”ì¼ \"ì‹¤í–‰\"\n### E011 - ê¹€ìˆ˜í˜„ ì†Œì„¤ ì›ê³  47í˜ì´ì§€\n\n---\n\nâš ï¸ **ë ˆë“œí—¤ë§ ê²½ê³ !**\n\nì´ 3ê°€ì§€ ì¦ê±°ëŠ” ëª¨ë‘ **ê¹€ìˆ˜í˜„ì˜ ì†Œì„¤ ì‘ì—…**ê³¼ ê´€ë ¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n### E011 ì†Œì„¤ ì›ê³  ë°œê²¬ìœ¼ë¡œ ëª¨ë“  ì˜ì‹¬ í•´ì†Œ\n- ì œëª©: \"ì™„ë²½í•œ ë°€ì‹¤\"\n- 3ê°œì›”ê°„ ì‘ì—… (8ì›”~10ì›”)\n- í¸ì§‘ìì™€ ì •ì‹ êµì‹ \n- 10/23 ì™„ì„±ë³¸ 47í˜ì´ì§€ ì „ì†¡\n\n### ê²€ìƒ‰ ê¸°ë¡ (E004-1)ì€ ì†Œì„¤ ìë£Œ ì¡°ì‚¬\n- 10/18~22: ë””ê³¡ì‹ , ì‹¬ì¥ë§ˆë¹„ ë“± ê²€ìƒ‰\n- ì†Œì„¤ ì§‘í•„ì„ ìœ„í•œ ë¦¬ì„œì¹˜\n\n### ì´ë©”ì¼ \"ì‹¤í–‰\" (E004-2)ì€ ì†Œì„¤ ìºë¦­í„° ëŒ€ì‚¬\n- \"ì˜¤ëŠ˜ ë°¤ ì‹¤í–‰í•˜ê¸°ë¡œ í–ˆì–´\"\n- ì†Œì„¤ ì† ë¹„ì„œ 'ìˆ˜ì§„'ì˜ ë…ë°±\n\n---\n\n## ìš©ì˜ìë³„ í™•ë¥  ë¶„ì„\n\n### ê¹€ìˆ˜í˜„: **5.0%**\n- âš ï¸ **ì™„ë²½í•œ ë ˆë“œí—¤ë§**\n- ì†Œì„¤ ì›ê³ ë¡œ ë¬´ì£„ ì…ì¦\n\n### í•œì§€ì€: **70.0%**\n- ë¬¼ë¦¬ì  ì¦ê±° ì••ë„ì \n- ë‚šì‹¯ì¤„, ë°œìêµ­, ë””ê³¡ì‹ \n\n---\n\n## AI ìµœì¢… íŒë‹¨\n\n**ê¹€ìˆ˜í˜„ì´ ì•„ë‹ˆë¼ í•œì§€ì€ì…ë‹ˆë‹¤!**\n\nì„ íƒí•˜ì‹  ì¦ê±°ë¬¼ë§Œìœ¼ë¡œëŠ” ê¹€ìˆ˜í˜„ì˜ ë ˆë“œí—¤ë§ë§Œ í™•ì¸ë©ë‹ˆë‹¤.\nì§„ë²”ì„ ì°¾ìœ¼ë ¤ë©´ **ë¬¼ë¦¬ì  ì¦ê±°**ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë¶„ì„í•˜ì„¸ìš”.\n\n**ê¶Œì¥: E003 ë‚šì‹¯ì¤„, E006 ë³€ê¸° ë””ê³¡ì‹ , E009 íšŒì‚¬ ë°©ë¬¸ì„ ë‹¤ì‹œ ë¶„ì„í•´ë³´ì„¸ìš”.**",
      "probabilities": {
        "hanJiEun": 70.0,
        "kimSuHyun": 5.0,
        "parkJunYoung": 5.0,
        "unknown": 20.0
      },
      "keyEvidence": ["E011"],
      "redHerrings": [
        "ê¹€ìˆ˜í˜„ì˜ ëª¨ë“  ë””ì§€í„¸ ì¦ê±°ëŠ” ì†Œì„¤ ì‘ì—…"
      ],
      "recommendation": "ë¬¼ë¦¬ì  ì¦ê±° ì¬ë¶„ì„ í•„ìš”"
    }
  ]
}
```

---

## 6. AI í…œí”Œë¦¿ ì‹œìŠ¤í…œ

### 6.1 í…œí”Œë¦¿ ë§¤ì¹­ ì„œë¹„ìŠ¤

```dart
// lib/data/services/ai_template_service.dart
class AITemplateService {
  final AITemplateRepository _templateRepository;

  AITemplateService(this._templateRepository);

  // ì¦ê±°ë¬¼ ì¡°í•©ì— ë§ëŠ” í…œí”Œë¦¿ ì°¾ê¸°
  Future<AITemplate?> findTemplate({
    required AIAction action,
    required List<String> evidenceIds,
    required int currentDay,
  }) async {
    // 1. ëª¨ë“  í…œí”Œë¦¿ ë¡œë“œ
    final allTemplates = await _templateRepository.getTemplatesForAction(action);

    // 2. ì¦ê±°ë¬¼ ì¡°í•©ì´ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” í…œí”Œë¦¿ ì°¾ê¸°
    final exactMatch = allTemplates.firstWhereOrNull((template) {
      // Day ë²”ìœ„ ì²´í¬
      if (template.minDay != null && currentDay < template.minDay!) {
        return false;
      }
      if (template.maxDay != null && currentDay > template.maxDay!) {
        return false;
      }

      // ì¦ê±°ë¬¼ ì¡°í•© ì²´í¬ (ìˆœì„œ ë¬´ê´€)
      return template.matchesEvidences(evidenceIds);
    });

    if (exactMatch != null) {
      return exactMatch;
    }

    // 3. ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” í…œí”Œë¦¿ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ í…œí”Œë¦¿ ë°˜í™˜
    return _getDefaultTemplate(action, evidenceIds, currentDay);
  }

  // ê¸°ë³¸ í…œí”Œë¦¿ (fallback)
  AITemplate _getDefaultTemplate(
    AIAction action,
    List<String> evidenceIds,
    int currentDay,
  ) {
    String content = '';

    switch (action) {
      case AIAction.question:
        content = _generateDefaultQuestionResponse(evidenceIds);
        break;
      case AIAction.think:
        content = _generateDefaultThinkResponse(evidenceIds, currentDay);
        break;
      case AIAction.ultraThink:
        content = _generateDefaultUltraThinkResponse(evidenceIds, currentDay);
        break;
    }

    return AITemplate(
      id: 'DEFAULT',
      action: action,
      evidenceIds: evidenceIds,
      content: content,
    );
  }

  String _generateDefaultQuestionResponse(List<String> evidenceIds) {
    return """
# AI ë¶„ì„ ê²°ê³¼

ì„ íƒí•˜ì‹  ì¦ê±°ë¬¼:
${evidenceIds.map((id) => '- $id').join('\n')}

## ë¶„ì„

í˜„ì¬ê¹Œì§€ì˜ ì¦ê±°ë¡œëŠ” ëª…í™•í•œ ê²°ë¡ ì„ ë‚´ë¦¬ê¸° ì–´ë µìŠµë‹ˆë‹¤.

ë” ë§ì€ ì¦ê±°ë¥¼ ìˆ˜ì§‘í•˜ê±°ë‚˜, ë‹¤ë¥¸ ì¦ê±°ë¬¼ ì¡°í•©ì„ ì‹œë„í•´ë³´ì„¸ìš”.

**ê¶Œì¥: ë¬¼ë¦¬ì  ì¦ê±°ì™€ ë””ì§€í„¸ ì¦ê±°ë¥¼ í•¨ê»˜ ë¶„ì„**
""";
  }

  String _generateDefaultThinkResponse(List<String> evidenceIds, int currentDay) {
    // Dayë³„ ê¸°ë³¸ í™•ë¥  (ê°„ë‹¨í•œ íœ´ë¦¬ìŠ¤í‹±)
    Map<String, double> probabilities;

    if (currentDay <= 3) {
      probabilities = {
        'hanJiEun': 40.0,
        'kimSuHyun': 40.0,
        'parkJunYoung': 20.0,
      };
    } else if (currentDay == 4) {
      probabilities = {
        'hanJiEun': 50.0,
        'kimSuHyun': 40.0,
        'parkJunYoung': 10.0,
      };
    } else {
      // Day 5
      probabilities = {
        'hanJiEun': 70.0,
        'kimSuHyun': 5.0,
        'parkJunYoung': 5.0,
        'unknown': 20.0,
      };
    }

    return """
# Think ë¶„ì„ ê²°ê³¼

## ìš©ì˜ìë³„ í™•ë¥ 

${probabilities.entries.map((e) => '- ${e.key}: ${e.value}%').join('\n')}

## ë¶„ì„

ì„ íƒí•˜ì‹  ì¦ê±°ë¬¼ ì¡°í•©ì— ëŒ€í•œ íŠ¹ì • ë¶„ì„ì´ ì—†ìŠµë‹ˆë‹¤.

ë” í•µì‹¬ì ì¸ ì¦ê±°ë¬¼ì„ ì„ íƒí•˜ì‹œê±°ë‚˜, Ultra Thinkë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
""";
  }

  String _generateDefaultUltraThinkResponse(List<String> evidenceIds, int currentDay) {
    return """
# Ultra Think ì‹¬ì¸µ ë¶„ì„ ê²°ê³¼

## ìš©ì˜ìë³„ í™•ë¥ 

- í•œì§€ì€: 70.0%
- ê¹€ìˆ˜í˜„: 5.0%
- ë°•ì¤€ì˜: 5.0%
- ê¸°íƒ€: 20.0%

## ë¶„ì„

ì„ íƒí•˜ì‹  ì¦ê±°ë¬¼ ì¡°í•©ì— ëŒ€í•œ íŠ¹ì • ë¶„ì„ì´ ì—†ìŠµë‹ˆë‹¤.

**ê¶Œì¥ ì¦ê±°ë¬¼ ì¡°í•©:**
- E003 ë‚šì‹¯ì¤„ + E006 ë³€ê¸° ë””ê³¡ì‹  + E009 íšŒì‚¬ ë°©ë¬¸
- E004-1 ê²€ìƒ‰ + E004-2 ì´ë©”ì¼ + E011 ì†Œì„¤ ì›ê³ 

í•µì‹¬ ì¦ê±°ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë‹¤ì‹œ ë¶„ì„í•´ë³´ì„¸ìš”.
""";
  }
}
```

### 6.2 AI Analysis Use Case

```dart
// lib/domain/use_cases/ai_analysis_use_case.dart
class AIAnalysisUseCase {
  final AITemplateService _templateService;
  final TokenProvider _tokenProvider;
  final GameStateProvider _gameStateProvider;

  Future<AIResponse> execute(
    AIAction action,
    List<String> selectedEvidenceIds,
  ) async {
    // 1. í† í° ì²´í¬
    if (!_tokenProvider.canAfford(action.cost)) {
      throw InsufficientTokenException();
    }

    // 2. í† í° ì°¨ê°
    _tokenProvider.spend(action.cost);

    // 3. í˜„ì¬ Day ê°€ì ¸ì˜¤ê¸°
    final currentDay = _gameStateProvider.currentDay;

    // 4. í…œí”Œë¦¿ ì°¾ê¸° (ì¦‰ì‹œ ì‹¤í–‰)
    final template = await _templateService.findTemplate(
      action: action,
      evidenceIds: selectedEvidenceIds,
      currentDay: currentDay,
    );

    if (template == null) {
      throw AITemplateNotFoundException();
    }

    // 5. AI Response ìƒì„±
    return AIResponse(
      action: action,
      timestamp: DateTime.now(),
      selectedEvidenceIds: selectedEvidenceIds,
      content: template.content,
      probabilities: template.probabilities,
      keyEvidence: template.keyEvidence,
      redHerrings: template.redHerrings,
      recommendation: template.recommendation,
    );

    // ì£¼ì˜: ì‹¤ì œ ì²˜ë¦¬ëŠ” ì¦‰ì‹œ ì™„ë£Œë¨
    // UIì—ì„œ action.durationë§Œí¼ ì—°ì¶œìš© ëŒ€ê¸° í‘œì‹œ
  }
}
```

### 6.3 í…œí”Œë¦¿ ì‘ì„± ì „ëµ

**í…œí”Œë¦¿ ê°œìˆ˜ ì‚°ì •**:

```
ì¦ê±°ë¬¼ ì´ ê°œìˆ˜: ~15ê°œ
3ê°œ ì¡°í•©: C(15, 3) = 455ê°œ

í•˜ì§€ë§Œ ëª¨ë“  ì¡°í•©ì„ ì‘ì„±í•  í•„ìš”ëŠ” ì—†ìŒ:

1. í•µì‹¬ ì¡°í•© (í•„ìˆ˜): ~20ê°œ
   - ì •ë‹µ ë£¨íŠ¸ ì¡°í•©
   - ë ˆë“œí—¤ë§ ì¡°í•©
   - ì£¼ìš” ë¶„ê¸°ì  ì¡°í•©

2. ì¼ë°˜ ì¡°í•© (ì˜µì…˜): ~30ê°œ
   - ìì£¼ ì„ íƒë  ë§Œí•œ ì¡°í•©

3. ê¸°ë³¸ í…œí”Œë¦¿ (fallback): 3ê°œ
   - question, think, ultraThink ê° 1ê°œ
   - ë§¤ì¹­ë˜ëŠ” í…œí”Œë¦¿ì´ ì—†ì„ ë•Œ ì‚¬ìš©

ì´: 50-60ê°œ í…œí”Œë¦¿
```

**ìš°ì„ ìˆœìœ„ë³„ í…œí”Œë¦¿ ì‘ì„±**:

| ìš°ì„ ìˆœìœ„ | í…œí”Œë¦¿ íƒ€ì… | ê°œìˆ˜ | ë¹„ê³  |
|---------|-----------|------|------|
| â­â­â­â­â­ | Ultra Think í•µì‹¬ ì¡°í•© | 5ê°œ | E003+E006+E009 ë“± ì •ë‹µ ë£¨íŠ¸ |
| â­â­â­â­â­ | Ultra Think ë ˆë“œí—¤ë§ | 3ê°œ | E004+E011 ë“± ê¹€ìˆ˜í˜„ ì¡°í•© |
| â­â­â­â­ | Think í•µì‹¬ ì¡°í•© | 10ê°œ | Dayë³„ ì£¼ìš” ì¡°í•© |
| â­â­â­ | Question ì£¼ìš” ì¡°í•© | 15ê°œ | ìì£¼ ì‚¬ìš©ë  ì¡°í•© |
| â­â­ | Think ì¼ë°˜ ì¡°í•© | 20ê°œ | ì¶”ê°€ ì¡°í•© |
| â­ | Fallback | 3ê°œ | ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ |

---

## 7. ê°œë°œ ë¡œë“œë§µ

### 7.1 Phase 1: ê¸°ë³¸ í”„ë ˆì„ì›Œí¬ (Week 1-3)

**ëª©í‘œ**: ì•± ë¼ˆëŒ€ êµ¬ì¶•, í™”ë©´ ë„¤ë¹„ê²Œì´ì…˜, ê¸°ë³¸ UI

```
Week 1: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
âœ“ Flutter í”„ë¡œì íŠ¸ ìƒì„± (3.24+)
âœ“ Riverpod, Hive, ê¸°íƒ€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
âœ“ í´ë” êµ¬ì¡° êµ¬ì„±
âœ“ ë‹¤í¬ í…Œë§ˆ ì„¤ì •
âœ“ ë”ë¯¸ ëª¨ë¸ í´ë˜ìŠ¤ ì‘ì„±

Week 2: ë©”ì¸ í™”ë©´ ë° ë„¤ë¹„ê²Œì´ì…˜
âœ“ MainScreen êµ¬í˜„
âœ“ í™”ë©´ ë¼ìš°íŒ… ì„¤ì •
âœ“ AppBar ë° DayTimer
âœ“ FolderIcon ìœ„ì ¯

Week 3: ê¸°ë³¸ í™”ë©´ ìŠ¤ìºí´ë”©
âœ“ EmailListScreen
âœ“ CaseFilesScreen
âœ“ EvidenceScreen
âœ“ ë”ë¯¸ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸
```

---

### 7.2 Phase 2: ë°ì´í„° ì‹œìŠ¤í…œ (Week 4-6)

**ëª©í‘œ**: JSON íŒŒì‹±, Hive ì—°ë™, ìƒíƒœ ê´€ë¦¬

```
Week 4: ë°ì´í„° ëª¨ë¸ ë° JSON
âœ“ Email, Suspect, Evidence ëª¨ë¸
âœ“ json_serializable ì ìš©
âœ“ AssetLoader êµ¬í˜„
âœ“ Day 1 ì´ë©”ì¼ 3ê°œ JSON

Week 5: Hive ë¡œì»¬ ì €ì¥ì†Œ
âœ“ Hive TypeAdapter
âœ“ GameState ì €ì¥/ë¡œë“œ
âœ“ StorageService êµ¬í˜„

Week 6: Riverpod ìƒíƒœ ê´€ë¦¬
âœ“ GameStateProvider
âœ“ EmailProvider
âœ“ TokenProvider
âœ“ í™”ë©´ ì—°ê²°
```

---

### 7.3 Phase 3: í•µì‹¬ ê²Œì„ ë¡œì§ (Week 7-9)

**ëª©í‘œ**: Day ì‹œìŠ¤í…œ, í† í° ì‹œìŠ¤í…œ, ì´ë©”ì¼ í•´ê¸ˆ

```
Week 7: Day ì‹œìŠ¤í…œ
âœ“ Day ì§„í–‰ ë¡œì§
âœ“ ì´ë©”ì¼ ìë™ í•´ê¸ˆ
âœ“ Day 5 ì œì¶œ ë²„íŠ¼
âœ“ íƒ€ì´ë¨¸ í‘œì‹œ

Week 8: í† í° ì‹œìŠ¤í…œ ë° ë³´ê°• ìˆ˜ì‚¬
âœ“ í† í° ì°¨ê°/ë³µì›
âœ“ ë³´ê°• ìˆ˜ì‚¬ ì‹œìŠ¤í…œ
âœ“ ë‹¤ìŒ ë‚  íŒŒì¼ í•´ê¸ˆ

Week 9: ì´ë©”ì¼ ìƒì„¸ í™”ë©´
âœ“ EmailDetailScreen
âœ“ Markdown ë Œë”ë§
âœ“ ì²¨ë¶€íŒŒì¼ ë·°ì–´
âœ“ ì½ìŒ ì²˜ë¦¬
```

---

### 7.4 Phase 4: AI í…œí”Œë¦¿ ì‹œìŠ¤í…œ (Week 10-12) â­ ìˆ˜ì •

**ëª©í‘œ**: í…œí”Œë¦¿ ê¸°ë°˜ AI ì‘ë‹µ ì‹œìŠ¤í…œ êµ¬ì¶•

```
Week 10: í…œí”Œë¦¿ ë°ì´í„° êµ¬ì¡°
âœ“ AITemplate ëª¨ë¸ ì‘ì„±
âœ“ AITemplateRepository êµ¬í˜„
âœ“ JSON í…œí”Œë¦¿ íŒŒì¼ êµ¬ì¡° ì„¤ê³„
âœ“ í…œí”Œë¦¿ ë¡œë“œ í…ŒìŠ¤íŠ¸

Week 11: ì¦ê±°ë¬¼ ì„ íƒ UI
âœ“ EvidenceSelectorDialog êµ¬í˜„
âœ“ EvidenceSelectorItem ìœ„ì ¯
âœ“ 3ê°œ ì„ íƒ ì œí•œ ë¡œì§
âœ“ ì„ íƒ ì™„ë£Œ ë²„íŠ¼

Week 12: í…œí”Œë¦¿ ë§¤ì¹­ ë° ì‘ë‹µ
âœ“ AITemplateService êµ¬í˜„ (í…œí”Œë¦¿ ë§¤ì¹­)
âœ“ AIAnalysisUseCase ìˆ˜ì • (í…œí”Œë¦¿ ê¸°ë°˜)
âœ“ AIResponseScreen (Markdown ë Œë”ë§)
âœ“ ì—°ì¶œìš© ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ (duration)
âœ“ ê¸°ë³¸ í…œí”Œë¦¿ 5ê°œ ì‘ì„± (í…ŒìŠ¤íŠ¸ìš©)
```

**ì£¼ìš” ë³€ê²½ì‚¬í•­**:
- âŒ Claude API ì—°ë™ ì œê±°
- âœ… í…œí”Œë¦¿ ê¸°ë°˜ ì‹œìŠ¤í…œìœ¼ë¡œ ëŒ€ì²´
- âœ… ì¦ê±°ë¬¼ ì„ íƒ UI ì¶”ê°€
- âœ… ë¡œì»¬ì—ì„œ ì¦‰ì‹œ ì‘ë‹µ

---

### 7.5 Phase 5: ì½˜í…ì¸  í†µí•© (Week 13-16) â­ í™•ì¥

**ëª©í‘œ**: 15ê°œ ì´ë©”ì¼, ì¦ê±°ë¬¼, AI í…œí”Œë¦¿ ì‘ì„±

```
Week 13: ì´ë©”ì¼ ì½˜í…ì¸ 
âœ“ Day 1-5 ì´ë©”ì¼ 15ê°œ JSON
âœ“ ì²¨ë¶€íŒŒì¼ Markdown
âœ“ ì´ë¯¸ì§€/ì¦ê±° ì‚¬ì§„ ì—ì…‹
âœ“ ëª¨ë“  ì´ë©”ì¼ í…ŒìŠ¤íŠ¸

Week 14: ìš©ì˜ì ì‹œìŠ¤í…œ
âœ“ SuspectDetailScreen
âœ“ ìš©ì˜ì í”„ë¡œí•„ ì¹´ë“œ
âœ“ ê´€ë ¨ ì¦ê±° í•„í„°ë§
âœ“ í”Œë ˆì´ì–´ ë©”ëª¨ ê¸°ëŠ¥

Week 15: ì¦ê±° ì‹œìŠ¤í…œ
âœ“ EvidenceScreen ì™„ì„±
âœ“ ì¦ê±° ì¹´ë“œ GridView
âœ“ ì¦ê±° ìƒì„¸ í™”ë©´
âœ“ ì¦ê±° ë¶„ë¥˜

Week 16: AI í…œí”Œë¦¿ ì‘ì„± â­ ì‹ ê·œ
âœ“ Ultra Think í•µì‹¬ í…œí”Œë¦¿ 8ê°œ
âœ“ Think í…œí”Œë¦¿ 15ê°œ
âœ“ Question í…œí”Œë¦¿ 20ê°œ
âœ“ Fallback í…œí”Œë¦¿ 3ê°œ
âœ“ ëª¨ë“  í…œí”Œë¦¿ í…ŒìŠ¤íŠ¸
```

---

### 7.6 Phase 6: ì—”ë”© ì‹œìŠ¤í…œ (Week 17-18)

**ëª©í‘œ**: ìµœì¢… ì œì¶œ, ì—”ë”© íŒì •, ì»·ì‹ 

```
Week 17: ìµœì¢… ì œì¶œ í™”ë©´
âœ“ FinalSubmissionScreen
âœ“ ìš©ì˜ì ì„ íƒ
âœ“ ê·¼ê±° ì‘ì„±
âœ“ ì œì¶œ í™•ì¸

Week 18: ì—”ë”© íŒì • ë° í™”ë©´
âœ“ EndingResult íŒì •
âœ“ AI ì˜ê²¬ ì¼ì¹˜ ì²´í¬
âœ“ EndingScreen êµ¬í˜„
âœ“ ë²”í–‰ ì¬í˜„ í…ìŠ¤íŠ¸
```

---

### 7.7 Phase 7: í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì • (Week 19-20)

**ëª©í‘œ**: QA, ë²„ê·¸ ìˆ˜ì •, ì„±ëŠ¥ ìµœì í™”

```
Week 19: ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
âœ“ ëª¨ë“  í™”ë©´ ë™ì‘ í…ŒìŠ¤íŠ¸
âœ“ Day 1-5 ì „ì²´ í”Œë ˆì´
âœ“ AI í…œí”Œë¦¿ ë§¤ì¹­ ê²€ì¦
âœ“ ì—”ë”© ë¶„ê¸° í…ŒìŠ¤íŠ¸

Week 20: ë²„ê·¸ ìˆ˜ì • ë° ìµœì í™”
âœ“ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì²´í¬
âœ“ ë¡œë”© ì‹œê°„ ê°œì„ 
âœ“ ì• ë‹ˆë©”ì´ì…˜ ìµœì í™”
âœ“ í…œí”Œë¦¿ ë¯¸ìŠ¤ë§¤ì¹­ ì²˜ë¦¬
```

---

### 7.8 Phase 8: í”Œë«í¼ë³„ ë¹Œë“œ ë° ì¶œì‹œ (Week 21-22)

**ëª©í‘œ**: Android/iOS/Steam ë¹Œë“œ, ìŠ¤í† ì–´ ë“±ë¡

```
Week 21: Android/iOS ë¹Œë“œ
âœ“ APK/AAB ë¹Œë“œ
âœ“ IPA ë¹Œë“œ
âœ“ ìŠ¤í† ì–´ ë“±ë¡
âœ“ ìŠ¤í¬ë¦°ìƒ· ì œì‘

Week 22: Steam ë¹Œë“œ (ì˜µì…˜)
âœ“ Windows/macOS ë¹Œë“œ
âœ“ ìŠ¤íŒ€ì›Œí¬ìŠ¤ ì—°ë™
âœ“ ìŠ¤í† ì–´ í˜ì´ì§€ ì‘ì„±
```

---

## 8. ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤

### 8.1 í•„ìˆ˜ ê¸°ëŠ¥ (MVP)

| ê¸°ëŠ¥ | ì¤‘ìš”ë„ | êµ¬í˜„ ë‚œì´ë„ | Phase |
|------|--------|-------------|-------|
| ë©”ì¸ í™”ë©´ ë° ë„¤ë¹„ê²Œì´ì…˜ | â­â­â­â­â­ | ì‰¬ì›€ | 1 |
| Day ì‹œìŠ¤í…œ ë° ì´ë©”ì¼ í•´ê¸ˆ | â­â­â­â­â­ | ì¤‘ê°„ | 3 |
| í† í° ì‹œìŠ¤í…œ | â­â­â­â­â­ | ì‰¬ì›€ | 3 |
| ì´ë©”ì¼ 15ê°œ + ì²¨ë¶€íŒŒì¼ | â­â­â­â­â­ | ì¤‘ê°„ | 5 |
| **ì¦ê±°ë¬¼ ì„ íƒ UI** | â­â­â­â­â­ | ì¤‘ê°„ | 4 |
| **AI í…œí”Œë¦¿ ì‹œìŠ¤í…œ** | â­â­â­â­â­ | ì¤‘ê°„ | 4 |
| **AI í…œí”Œë¦¿ ì‘ì„± (50ê°œ)** | â­â­â­â­â­ | ì¤‘ê°„ | 5 |
| ìµœì¢… ì œì¶œ ë° ì—”ë”© | â­â­â­â­â­ | ì‰¬ì›€ | 6 |
| Hive ì„¸ì´ë¸Œ/ë¡œë“œ | â­â­â­â­â­ | ì¤‘ê°„ | 2 |

### 8.2 ì¤‘ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì¤‘ìš”ë„ | êµ¬í˜„ ë‚œì´ë„ | Phase |
|------|--------|-------------|-------|
| ìš©ì˜ì ìƒì„¸ í™”ë©´ | â­â­â­â­ | ì‰¬ì›€ | 5 |
| ì¦ê±° ê°¤ëŸ¬ë¦¬ | â­â­â­â­ | ì‰¬ì›€ | 5 |
| í”Œë ˆì´ì–´ ë©”ëª¨ ê¸°ëŠ¥ | â­â­â­â­ | ì‰¬ì›€ | 5 |
| AI ì‘ë‹µ íˆìŠ¤í† ë¦¬ | â­â­â­â­ | ì¤‘ê°„ | 4 |
| ë³´ê°• ìˆ˜ì‚¬ ì‹œìŠ¤í…œ | â­â­â­â­ | ì¤‘ê°„ | 3 |
| ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ | â­â­â­ | ì¤‘ê°„ | 1-7 |

### 8.3 ì¶”ê°€ ê¸°ëŠ¥ (Post-MVP)

| ê¸°ëŠ¥ | ì¤‘ìš”ë„ | êµ¬í˜„ ë‚œì´ë„ | ë¹„ê³  |
|------|--------|-------------|------|
| ë‹¤í¬/ë¼ì´íŠ¸ í…Œë§ˆ ì „í™˜ | â­â­ | ì‰¬ì›€ | ì„¤ì • ë©”ë‰´ |
| ë‹¤êµ­ì–´ ì§€ì› (ì˜ì–´) | â­â­â­ | ì–´ë ¤ì›€ | í•´ì™¸ ì¶œì‹œìš© |
| ë²”í–‰ ì¬í˜„ ì˜ìƒ | â­â­ | ì–´ë ¤ì›€ | ì—”ë”© ì»·ì‹  |
| ë„ì „ê³¼ì œ ì‹œìŠ¤í…œ | â­â­ | ì¤‘ê°„ | Steam ì—°ë™ |
| í•˜ë“œ ëª¨ë“œ (í† í° 300) | â­â­ | ì‰¬ì›€ | ë‚œì´ë„ ì˜µì…˜ |

---

## 9. ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘ ì „ëµ

### 9.1 ê¸°ìˆ ì  ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | í™•ë¥  | ì˜í–¥ë„ | ëŒ€ì‘ ì „ëµ |
|--------|------|--------|-----------|
| ~~Claude API ë¹„ìš© ì´ˆê³¼~~ | âŒ ì œê±° | - | í…œí”Œë¦¿ ì‹œìŠ¤í…œìœ¼ë¡œ í•´ê²° |
| **í…œí”Œë¦¿ ë§¤ì¹­ ì‹¤íŒ¨** | ì¤‘ê°„ | ì¤‘ê°„ | - Fallback í…œí”Œë¦¿ ì¤€ë¹„<br>- ê¸°ë³¸ ì‘ë‹µ ë¡œì§ êµ¬í˜„ |
| **í…œí”Œë¦¿ ì‘ì„± ì‹œê°„ ë¶€ì¡±** | ë†’ìŒ | ì¤‘ê°„ | - ìš°ì„ ìˆœìœ„ í…œí”Œë¦¿ë¶€í„° ì‘ì„±<br>- Fallbackìœ¼ë¡œ ì»¤ë²„ |
| Flutter Desktop ì•ˆì •ì„± | ë‚®ìŒ | ì¤‘ê°„ | - ëª¨ë°”ì¼ ìš°ì„  ê°œë°œ |
| Hive ë°ì´í„° ì†ì‹¤ | ë‚®ìŒ | ë†’ìŒ | - ë°±ì—… ë©”ì»¤ë‹ˆì¦˜<br>- SharedPreferences ì´ì¤‘í™” |

### 9.2 ì¼ì • ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | í™•ë¥  | ì˜í–¥ë„ | ëŒ€ì‘ ì „ëµ |
|--------|------|--------|-----------|
| **AI í…œí”Œë¦¿ ì‘ì„± ì§€ì—°** | ë†’ìŒ | ë†’ìŒ | - í•µì‹¬ í…œí”Œë¦¿ ìš°ì„  (20ê°œ)<br>- Fallbackìœ¼ë¡œ ë‚˜ë¨¸ì§€ ì»¤ë²„ |
| ì½˜í…ì¸  ì‘ì—… ì§€ì—° | ì¤‘ê°„ | ì¤‘ê°„ | - ì´ë©”ì¼ í…œí”Œë¦¿í™”<br>- ìš°ì„ ìˆœìœ„ ì¬ì¡°ì • |
| í…ŒìŠ¤íŠ¸ ì‹œê°„ ë¶€ì¡± | ì¤‘ê°„ | ì¤‘ê°„ | - ìœ ë‹› í…ŒìŠ¤íŠ¸ ìë™í™”<br>- ë² íƒ€ í…ŒìŠ¤í„° ëª¨ì§‘ |

### 9.3 ì½˜í…ì¸  ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | í™•ë¥  | ì˜í–¥ë„ | ëŒ€ì‘ ì „ëµ |
|--------|------|--------|-----------|
| **í…œí”Œë¦¿ í’ˆì§ˆ ì €í•˜** | ì¤‘ê°„ | ë†’ìŒ | - í•µì‹¬ í…œí”Œë¦¿ ì§‘ì¤‘ ì‘ì„±<br>- ë² íƒ€ í…ŒìŠ¤íŠ¸ë¡œ ê²€ì¦ |
| **ì¦ê±°ë¬¼ ì¡°í•© ë°¸ëŸ°ìŠ¤** | ì¤‘ê°„ | ì¤‘ê°„ | - í”Œë ˆì´í…ŒìŠ¤íŠ¸ë¡œ ì¡°ì •<br>- íŒíŠ¸ ì‹œìŠ¤í…œ ì¶”ê°€ ê³ ë ¤ |

---

## 10. í’ˆì§ˆ ë³´ì¦ ê³„íš

### 10.1 í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

```yaml
ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸:
  - [ ] Day 1-5 ëª¨ë“  ì´ë©”ì¼ ì •ìƒ ë„ì°©
  - [ ] í† í° ì†Œë¹„/ì”ì•¡ ì •í™•
  - [ ] ì¦ê±°ë¬¼ 3ê°œ ì„ íƒ UI ë™ì‘
  - [ ] AI í…œí”Œë¦¿ ë§¤ì¹­ ì •í™•ë„ (í•µì‹¬ ì¡°í•©)
  - [ ] Fallback í…œí”Œë¦¿ ë™ì‘
  - [ ] ë³´ê°• ìˆ˜ì‚¬ â†’ ë‹¤ìŒ ë‚  íŒŒì¼ ì œê³µ
  - [ ] ìµœì¢… ì œì¶œ ë° ì—”ë”© ë¶„ê¸° (7ì¢…)
  - [ ] ì„¸ì´ë¸Œ/ë¡œë“œ ì •ìƒ ì‘ë™

AI í…œí”Œë¦¿ í…ŒìŠ¤íŠ¸:
  - [ ] í•µì‹¬ í…œí”Œë¦¿ 20ê°œ ë§¤ì¹­ ê²€ì¦
  - [ ] Fallback í…œí”Œë¦¿ ë™ì‘ í™•ì¸
  - [ ] Markdown ë Œë”ë§ í™•ì¸
  - [ ] í™•ë¥  ê³„ì‚° ì •í™•ë„
  - [ ] ë ˆë“œí—¤ë§ ê²½ê³  í‘œì‹œ

UI/UX í…ŒìŠ¤íŠ¸:
  - [ ] ë‹¤í¬ í…Œë§ˆ ì¼ê´€ì„±
  - [ ] í°íŠ¸ ê°€ë…ì„± (Noto Sans KR)
  - [ ] ì¦ê±°ë¬¼ ì„ íƒ UI ì‚¬ìš©ì„±
  - [ ] í„°ì¹˜ ì˜ì—­ ì¶©ë¶„ (ìµœì†Œ 44x44)
  - [ ] ì• ë‹ˆë©”ì´ì…˜ 60fps
  - [ ] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ (ê°€ë¡œ ëª¨ë“œ)

í”Œë«í¼ í…ŒìŠ¤íŠ¸:
  - [ ] Android 5.0+ ì •ìƒ ì‘ë™
  - [ ] iOS 13+ ì •ìƒ ì‘ë™
  - [ ] Windows/macOS ë¹Œë“œ (ì˜µì…˜)

ì„±ëŠ¥ í…ŒìŠ¤íŠ¸:
  - [ ] ì•± ì‹œì‘ ì‹œê°„ < 3ì´ˆ
  - [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ < 200MB
  - [ ] í…œí”Œë¦¿ ë¡œë“œ ì‹œê°„ < 100ms
  - [ ] ì´ë¯¸ì§€ ë¡œë”© ìµœì í™”
```

### 10.2 ì‚¬ìš©ì í…ŒìŠ¤íŠ¸

**ë² íƒ€ í…ŒìŠ¤íŠ¸ ê³„íš**:
```
Week 19-20: í´ë¡œì¦ˆë“œ ë² íƒ€
- í…ŒìŠ¤í„°: 10ëª…
- ëª©í‘œ: ë²„ê·¸ ë°œê²¬, UX ê°œì„ , í…œí”Œë¦¿ í’ˆì§ˆ ê²€ì¦
- ì„¤ë¬¸: ë‚œì´ë„, ëª°ì…ë„, AI ì‘ë‹µ í’ˆì§ˆ

Week 21: ì˜¤í”ˆ ë² íƒ€ (ì˜µì…˜)
- TestFlight (iOS) / Google Play ë² íƒ€
- í”¼ë“œë°± ìˆ˜ì§‘ ë° í…œí”Œë¦¿ ê°œì„ 
```

---

## ğŸ“Œ í•µì‹¬ ë§ˆì¼ìŠ¤í†¤

### Milestone 1: í”„ë¡œí† íƒ€ì… (Week 6)
âœ… í™”ë©´ ë„¤ë¹„ê²Œì´ì…˜ ë™ì‘
âœ… JSON ë°ì´í„° ë¡œë“œ
âœ… ê¸°ë³¸ UI ì™„ì„±

### Milestone 2: Alpha (Week 12)
âœ… Day ì‹œìŠ¤í…œ ì™„ì„±
âœ… **í…œí”Œë¦¿ ê¸°ë°˜ AI ì‹œìŠ¤í…œ êµ¬ì¶•**
âœ… ì´ë©”ì¼ 5ê°œ í†µí•©
âœ… **ê¸°ë³¸ í…œí”Œë¦¿ 5ê°œ ì‘ì„±**

### Milestone 3: Beta (Week 18)
âœ… ì „ì²´ ì½˜í…ì¸  í†µí•© (ì´ë©”ì¼ 15ê°œ)
âœ… **AI í…œí”Œë¦¿ 50ê°œ ì‘ì„±**
âœ… ì—”ë”© ì‹œìŠ¤í…œ ì™„ì„±
âœ… ë²„ê·¸ ìˆ˜ì •

### Milestone 4: Release (Week 22)
âœ… ìŠ¤í† ì–´ ì¶œì‹œ (Android/iOS)
âœ… Steam ì¶œì‹œ (ì˜µì…˜)
âœ… ë§ˆì¼€íŒ… ìë£Œ ì™„ì„±

---

## ğŸ¯ ë‹¤ìŒ ì•¡ì…˜ ì•„ì´í…œ

### ì¦‰ì‹œ ì‹œì‘ (Week 1)

1. **Flutter í”„ë¡œì íŠ¸ ìƒì„±**
   ```bash
   flutter create aiprofiler
   cd aiprofiler
   flutter pub add flutter_riverpod hive hive_flutter shared_preferences
   flutter pub add flutter_markdown google_fonts cached_network_image flutter_animate
   flutter pub add --dev build_runner json_serializable hive_generator
   ```

2. **í´ë” êµ¬ì¡° ìƒì„±**
   - lib/ í•˜ìœ„ core, data, domain, presentation í´ë”
   - assets/ í•˜ìœ„ data, images, fonts, **ai_templates** í´ë”

3. **ë‹¤í¬ í…Œë§ˆ ì„¤ì •**
   - lib/core/constants/colors.dart
   - lib/core/constants/text_styles.dart

4. **ì²« í™”ë©´ êµ¬í˜„**
   - lib/presentation/screens/main/main_screen.dart
   - ë°°ê²½ ì´ë¯¸ì§€ + 3ê°œ í´ë” ì•„ì´ì½˜

5. **Hive ì´ˆê¸°í™”**
   - main.dartì—ì„œ Hive.initFlutter()

---

## ğŸ’¡ í…œí”Œë¦¿ ì‹œìŠ¤í…œì˜ ì¥ì 

### âœ… ê¸°ìˆ ì  ì¥ì 
- **ì˜¤í”„ë¼ì¸ í”Œë ˆì´**: ë„¤íŠ¸ì›Œí¬ ë¶ˆí•„ìš”
- **ì¦‰ê° ì‘ë‹µ**: ì‹¤ì œ ì²˜ë¦¬ëŠ” ì¦‰ì‹œ (durationì€ ì—°ì¶œìš©)
- **ë¹„ìš© ì œë¡œ**: API í˜¸ì¶œ ë¹„ìš© ì—†ìŒ
- **ì¼ê´€ëœ í’ˆì§ˆ**: ê²Œì„ ë””ìì´ë„ˆê°€ ì™„ì „íˆ í†µì œ

### âœ… ê²Œì„ ë””ìì¸ ì¥ì 
- **ì •í™•í•œ íŒíŠ¸ ì œê³µ**: ì˜ë„í•œ íŒíŠ¸ë§Œ ì œê³µ
- **ë ˆë“œí—¤ë§ í†µì œ**: ë ˆë“œí—¤ë§ì„ ì •í™•íˆ ì„¤ê³„ ê°€ëŠ¥
- **ë‚œì´ë„ ì¡°ì ˆ**: í…œí”Œë¦¿ë³„ë¡œ ë‚œì´ë„ ì¡°ì ˆ
- **ì¬í”Œë ˆì´ ê°€ì¹˜**: ì¦ê±°ë¬¼ ì¡°í•©ë³„ ë‹¤ì–‘í•œ ì‘ë‹µ ë°œê²¬

### âœ… ê°œë°œ íš¨ìœ¨ì„±
- **API ì—°ë™ ë¶ˆí•„ìš”**: ë„¤íŠ¸ì›Œí¬ ì½”ë“œ ì œê±°
- **ë¡œì»¬ í…ŒìŠ¤íŠ¸ ìš©ì´**: ëª¨ë“  ì‘ë‹µ ì¦‰ì‹œ í™•ì¸ ê°€ëŠ¥
- **ë²„ì „ ê´€ë¦¬ ìš©ì´**: JSON íŒŒì¼ë¡œ ë²„ì „ ê´€ë¦¬

---

**ì‘ì„±ì**: Claude Code Assistant
**ìµœì¢… ìˆ˜ì •**: 2025-01-06 (í…œí”Œë¦¿ ê¸°ë°˜ AI ì‹œìŠ¤í…œìœ¼ë¡œ ì „í™˜)
**ë²„ì „**: 2.0

---

ì´ ë§ˆìŠ¤í„°í”Œëœì„ ê¸°ë°˜ìœ¼ë¡œ 22ì£¼ ë‚´ì— "ë°¤ì˜ ì¹¨ì…ì" ê²Œì„ì„ ì™„ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í…œí”Œë¦¿ ê¸°ë°˜ AI ì‹œìŠ¤í…œìœ¼ë¡œ API ë¹„ìš© ì—†ì´ ì˜¤í”„ë¼ì¸ì—ì„œë„ í”Œë ˆì´ ê°€ëŠ¥í•œ ê²Œì„ì´ ë©ë‹ˆë‹¤.

í™”ì´íŒ…! ğŸ®âœ¨
